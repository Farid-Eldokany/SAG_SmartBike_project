<html>
        <script src=https://swagdxb.eu-latest.cumulocity.com/inventory/binaries/1707620></script>
        <script src=https://swagdxb.eu-latest.cumulocity.com/inventory/binaries/1708057></script>
        <script src=https://swagdxb.eu-latest.cumulocity.com/inventory/binaries/1708058></script>

        <head></head>

        <body>

            <div class=container>
                <table cellspacing=0 class="table table-bordered table-hover table-inverse table-striped"id=example width=100%>
                    <thead>
                        <tr>
                        <th>Name<th>Total Distance<th>Maximum Speed<th>Average Speed<th>Total Calories Burnt
                    <tfoot>
                        <tr>
                        <th>Name<th>Total Distance<th>Maximum Speed<th>Average Speed<th>Total Calories Burnt
                    <tbody id=rows>

                </table>
            </div>
            

            <script type="text/javascript">
           
                
                const rows={};
                rows.number=0
                main()
                function main(){
                    fetchText()
                    setTimeout(main,6000);
                }
                function addRow(name, distance, avgSpeed, maxSpeed, calBurnt) {
                    document.getElementById("rows").innerHTML += '<tr><td>'+name+'<td>'+distance+' m<td>'+maxSpeed+' m/s<td>'+avgSpeed+' m/s<td>'+calBurnt+' cal'
                }
                async function fetchText() {
                    let response = await fetch('https://swagdxb.eu-latest.cumulocity.com/inventory/managedObjects/1400281');
                    var data=await response.text()
                    return updateTable(data)
                function updateTable(data){
                    var response=JSON.parse(data);
                    var array =response["leaderboard"];
                    var item;
                    var name;
                    while(Object.keys(array).length>rows.number){
                        key=Object.keys(array)[rows.number]
                        name=array[key]["name"]
                        name=name.charAt(0).toUpperCase()+name.slice(1)
                        item=array[key]["session_"+(Object.keys(array[key]).length-2).toString()]
                        console.log("session_"+(Object.keys(array[key]).length-2).toString())
                        addRow(name,item["distcvd"],item["avgspd"],item["maxspd"],item["calbrnt"]);
                        $(document).ready(function() {$('#example').DataTable();});
                        rows.number=rows.number+1
                    
                    }
                    
                }
                
            }
            </script>
            
        </body>

</html>